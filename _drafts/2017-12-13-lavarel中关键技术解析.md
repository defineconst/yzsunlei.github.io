---
layout: post
title: lavarel中关键技术解析
category: 阅读
tag: lavarel
exception: 
readtime: 8
---

# 手动构建Laravel框架
* 项目初始化
* 添加路由组件
* 添加控制器模块
* 添加模型组件
* 添加视图组件

# 常用的语法
* 组件化开发语法条件：命名空间、文件包含
* 匿名函数
* 魔术方法、魔术常量
* 反射
* 后期静态绑定
* trait

# 框架中的设计模式
* IoC容器用以解决依赖注入，而对服务容器的填充部分称为服务提供者
* Container类并不仅仅完成了IoC容器的功能，还在程序运行过程中提供各种相应的服务，包括对象、生成对象的回调函数、配置等
* 服务解析过程：一个是完成对应服务的查找(make函数)，另一个是完成服务的实现(build函数)
* $this->bootstrap()实现程序运行前的准备工作，包括环境检测、配置加载、日志管理、异常处理、外观注册、服务提供者注册、启动服务提供者七个步骤

# 请求到响应过程中整个生命周期
* 对请求从中间件到路由处理再到响应整个过程基本上都是以装饰者模式的思想进行处理的
* 请求到响应整个执行过程，主要归纳为四个阶段：程序启动准备阶段、请求实例化阶段、请求处理阶段、响应发送阶段、响应终止阶段

# 请求与响应的操作
* 请求实例的操作：获取想要的数据和参数；响应实例的操作：生成响应或进行重定向
* 请求实例的获取：1、Request->all()；2、app('request')；3、function login(Request $request)
* 请求参数的获取：$request、$query、$server、$files、$cookies、$headers、$session、$pathInfo、$method
* 请求参数的一次存储：flash()、flashOnly()、flashExcept()
* 获取一次存储数据：$request->old()
* 响应的生成一般三种：生成响应的主体、生成响应的首部和主体、生成重定向
* response()全局函数生成响应实例
* 生成重定向的响应：redirect('auth/login')、app('redirect')->to()、$this->createRedirect()、$this->setTargetUrl($url)、$this->headers->set('Location', $url)


function retry($times, callable $callback, $sleep = 0)
{
    $times--;

    beginning:
    try {
        return $callback();
    } catch (Exception $e) {
        if (! $times) {
            throw $e;
        }

        $times--;

        if ($sleep) {
            usleep($sleep * 1000);
        }

        goto beginning;
    }
}


$object->{$segment} php
get_object_vars() - 返回由对象属性组成的关联数组
get_class_methods() - 返回由类的方法名组成的数组
get_class_vars() - 返回由类的默认属性组成的数组

htmlspecialchars  php
对特殊字符进行转义
https://www.cnblogs.com/yingww/p/4290849.html

array|object dot

static $languageSpecific;
静态属性

ReflectionClass、ReflectionMethod
反射是指在PHP运行状态中，扩展分析PHP程序，导出或提取出关于类、方法、属性、参数等的详细信息
https://www.cnblogs.com/easirm/p/4216912.html

$this->app->singleton()函数的作用时将服务名与后面的提供服务的匿名函数绑定起来，用于服务解析
php中通常以“__”打头的方法都作为魔术方法，所以不要定义以“__”开头的方法


自定义排序
默认排序：sort、rsort，值排序：asort、arsort，键排序：ksort、rksort，自定义排序：usort，自然语言排序：natsort，多维排序：array_multisort
http://www.cnblogs.com/xiaochaohuashengmi/archive/2011/10/11/2207494.html

前n个固定分页列表

直接abort()，只能看到Laravel自带的错误提示页面
直接header()，不管用，返回空白页面
response()->header('status',404)  报错页面，提示Method header does not exist.
response('data')->header('status',404)  正常页面，显示data
response('')->header('status',404) 成功，返回404

依赖注入和反射应用
https://www.cnblogs.com/firstForEver/p/7976969.html






